(function(t){function e(e){for(var r,s,o=e[0],u=e[1],l=e[2],c=0,f=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);h&&h(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],r=!0,o=1;o<i.length;o++){var u=i[o];0!==a[u]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},a={index:0},n=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var h=u;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"phina-wrap"},[i("PhinaCanvas")],1)])},n=[],s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"phina-canvas-root"}},[i("canvas",{attrs:{id:"phina-canvas"}})])}],u=i("922f"),l=i("d4ec"),h=i("262e"),c=i("2caf"),f={common:{image:{actor4:"assets/textures/actor4.png"},tmx:{map1:"assets/map/main.tmx"},tsx:{tile_a:"assets/map/tileA.tsx",tile_d:"assets/map/tileD.tsx"}}},d=i("bee2"),g=i("ade3"),v=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){var r;return Object(l["a"])(this,i),t=u["o"].$safe.call(t||{},i.defaults),r=e.call(this,t),r.backgroundColor=t.backgroundColor,r.fromJSON({children:{titleLabel:{className:u["k"],arguments:{text:t.title,fill:t.fontColor,stroke:!1,fontSize:64},x:r.gridX.center(),y:r.gridY.span(4)}}}),"touch"===t.exitType&&r.fromJSON({children:{touchLabel:{className:u["k"],arguments:{text:"TOUCH START",fill:t.fontColor,stroke:!1,fontSize:32},x:r.gridX.center(),y:r.gridY.span(12)}}}),r}return Object(d["a"])(i,[{key:"update",value:function(t){var e=t.keyboard.getKey(u["j"].KEY_CODE["z"])||t.keyboard.getKey(u["j"].KEY_CODE["space"]);(t.pointer.getPointingStart()||e)&&this.exit()}}]),i}(u["g"]);Object(g["a"])(v,"defaults",{title:"phina.js games",message:"",fontColor:"white",backgroundColor:"hsl(200, 80%, 64%)",backgroundImage:"",exitType:"touch"});var p={width:960,height:640},m=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){return Object(l["a"])(this,i),e.call(this,u["o"].$safe.call(t||{},i.defaults))}return Object(d["a"])(i,[{key:"update",value:function(t){}}]),i}(u["g"]);Object(g["a"])(m,"defaults",{width:p.width,height:p.height,backgroundColor:"transparent"});var b=i("99de"),y=(i("fb6a"),function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,null,[{key:"getView",value:function(){return this._view||(this._view=document.createElement("canvas")),this._view}},{key:"getContext",value:function(){return this._view||(this._view=document.createElement("canvas")),this._context||(this._context=this._view.getContext("webgl")||this._view.getContext("experimental-webgl")),this._context}}]),t}());Object(g["a"])(y,"_view",null),Object(g["a"])(y,"_context",null);i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");var _="undefined"!==typeof Float32Array?Float32Array:Array,x=function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,null,[{key:"_create",value:function(){return new _(16)}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"create",value:function(){return this.identity(this._create())}},{key:"multiply",value:function(t,e,i){var r=t[0],a=t[1],n=t[2],s=t[3],o=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=t[9],d=t[10],g=t[11],v=t[12],p=t[13],m=t[14],b=t[15],y=e[0],_=e[1],x=e[2],O=e[3],E=e[4],A=e[5],T=e[6],k=e[7],w=e[8],j=e[9],S=e[10],M=e[11],R=e[12],F=e[13],L=e[14],N=e[15];return i[0]=y*r+_*o+x*c+O*v,i[1]=y*a+_*u+x*f+O*p,i[2]=y*n+_*l+x*d+O*m,i[3]=y*s+_*h+x*g+O*b,i[4]=E*r+A*o+T*c+k*v,i[5]=E*a+A*u+T*f+k*p,i[6]=E*n+A*l+T*d+k*m,i[7]=E*s+A*h+T*g+k*b,i[8]=w*r+j*o+S*c+M*v,i[9]=w*a+j*u+S*f+M*p,i[10]=w*n+j*l+S*d+M*m,i[11]=w*s+j*h+S*g+M*b,i[12]=R*r+F*o+L*c+N*v,i[13]=R*a+F*u+L*f+N*p,i[14]=R*n+F*l+L*d+N*m,i[15]=R*s+F*h+L*g+N*b,i}},{key:"cale",value:function(t,e,i){return i[0]=t[0]*e[0],i[1]=t[1]*e[0],i[2]=t[2]*e[0],i[3]=t[3]*e[0],i[4]=t[4]*e[1],i[5]=t[5]*e[1],i[6]=t[6]*e[1],i[7]=t[7]*e[1],i[8]=t[8]*e[2],i[9]=t[9]*e[2],i[10]=t[10]*e[2],i[11]=t[11]*e[2],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i}},{key:"translate",value:function(t,e,i){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],i[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],i[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],i[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],i}},{key:"rotate",value:function(t,e,i,r){var a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);if(!a)return null;var n=i[0],s=i[1],o=i[2];1!==a&&(a=1/a,n*=a,s*=a,o*=a);var u=Math.sin(e),l=Math.cos(e),h=1-l,c=t[0],f=t[1],d=t[2],g=t[3],v=t[4],p=t[5],m=t[6],b=t[7],y=t[8],_=t[9],x=t[10],O=t[11],E=n*n*h+l,A=s*n*h+o*u,T=o*n*h-s*u,k=n*s*h-o*u,w=s*s*h+l,j=o*s*h+n*u,S=n*o*h+s*u,M=s*o*h-n*u,R=o*o*h+l;return e?t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]):r=t,r[0]=c*E+v*A+y*T,r[1]=f*E+p*A+_*T,r[2]=d*E+m*A+x*T,r[3]=g*E+b*A+O*T,r[4]=c*k+v*w+y*j,r[5]=f*k+p*w+_*j,r[6]=d*k+m*w+x*j,r[7]=g*k+b*w+O*j,r[8]=c*S+v*M+y*R,r[9]=f*S+p*M+_*R,r[10]=d*S+m*M+x*R,r[11]=g*S+b*M+O*R,r}},{key:"lookAt",value:function(t,e,i,r){var a,n,s,o,u,l,h,c,f,d,g=t[0],v=t[1],p=t[2],m=i[0],b=i[1],y=i[2],_=e[0],x=e[1],O=e[2];return g===_&&v===x&&p===O?this.identity(r):(h=g-e[0],c=v-e[1],f=p-e[2],d=1/Math.sqrt(h*h+c*c+f*f),h*=d,c*=d,f*=d,a=b*f-y*c,n=y*h-m*f,s=m*c-b*h,d=Math.sqrt(a*a+n*n+s*s),d?(d=1/d,a*=d,n*=d,s*=d):(a=0,n=0,s=0),o=c*s-f*n,u=f*a-h*s,l=h*n-c*a,d=Math.sqrt(o*o+u*u+l*l),d?(d=1/d,o*=d,u*=d,l*=d):(o=0,u=0,l=0),r[0]=a,r[1]=o,r[2]=h,r[3]=0,r[4]=n,r[5]=u,r[6]=c,r[7]=0,r[8]=s,r[9]=l,r[10]=f,r[11]=0,r[12]=-(a*g+n*v+s*p),r[13]=-(o*g+u*v+l*p),r[14]=-(h*g+c*v+f*p),r[15]=1,r)}},{key:"ortho",value:function(t,e,i,r,a,n,s){var o=e-t,u=i-r,l=n-a;return s[0]=2/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2/l,s[11]=0,s[12]=-(t+e)/o,s[13]=-(i+r)/u,s[14]=-(n+a)/l,s[15]=1,s}}]),t}(),O=function(){function t(){Object(l["a"])(this,t),this.position=new Array(3),this.vMatrix=x.create(),this.pMatrix=x.create(),this.vpMatrix=x.create()}return Object(d["a"])(t,[{key:"setPosition",value:function(t,e,i){return this.position[0]=t,this.position[1]=e,this.position[2]=i,this}},{key:"lookAt",value:function(t,e,i){return x.lookAt(this.position,[t,e,i],[0,1,0],this.vMatrix),this}},{key:"ortho",value:function(t,e,i,r,a,n){return x.ortho(t,e,i,r,a,n,this.pMatrix),this}},{key:"calcVpMatrix",value:function(){return x.multiply(this.pMatrix,this.vMatrix,this.vpMatrix),this}},{key:"uniformValues",value:function(){return{vpMatrix:this.vpMatrix,cameraPosition:this.position}}}]),t}(),E=(i("25f0"),i("90d7"),i("c19f"),i("fb2c"),i("99af"),i("159b"),i("b0c0"),i("9911"),i("a15b"),i("8b09"),function(){function t(e){Object(l["a"])(this,t),this.gl=e,this._buffer=e.createBuffer(),this.length=0}return Object(d["a"])(t,[{key:"set",value:function(t){var e=this.gl;return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.length=t.length,this}},{key:"bind",value:function(){return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._buffer),this}},{key:"delete",value:function(){return this.gl.deleteBuffer(this._buffer),this}},{key:"value",get:function(){return null},set:function(t){this.set(t)}}],[{key:"unbind",value:function(t){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this}}]),t}()),A=0,T=function(){function t(e,i){Object(l["a"])(this,t),this.gl=e,this.usage=i||e.STATIC_DRAW,this._vbo=e.createBuffer(),this._vbo._id=A++,this.array=null}return Object(d["a"])(t,[{key:"set",value:function(t){var e=this.gl;return this.array?this.array.set(t):this.array=new Float32Array(t),e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,this.array,this.usage),e.bindBuffer(e.ARRAY_BUFFER,null),this}},{key:"setAsInterleavedArray",value:function(t){for(var e=t.length,i=t[0].data.length/t[0].unitSize,r=[],a=0;a<i;a++)for(var n=0;n<e;n++)for(var s=t[n],o=0;o<s.unitSize;o++)r.push(s.data[a*s.unitSize+o]);return this.set(r)}},{key:"updateInterleavedArray",value:function(t,e,i,r){for(var a=0,n=r/i;a<n;a++)for(var s=0;s<i;s++)this.array[a*t+e+s]=r[a*i+s];return this.set(this.array),this}},{key:"bind",value:function(){var t=this.gl;return t.bindBuffer(t.ARRAY_BUFFER,this._vbo),this}},{key:"delete",value:function(){this.gl.deleteBuffer(this._vbo)}}],[{key:"unbind",value:function(t){t.bindBuffer(t.ARRAY_BUFFER,null)}}]),t}(),k=function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,null,[{key:"getVertexArrayObject",value:function(t){return this._get(t,"OES_vertex_array_object")}},{key:"getInstancedArrays",value:function(t){return this._get(t,"ANGLE_instanced_arrays")}},{key:"_get",value:function(t,e){var i=t.getExtension(e);if(i)return i;throw e+" is not supported"}}]),t}(),w=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,r){var a;return Object(l["a"])(this,i),a=e.call(this),a.gl=t,a.extVao=r,a.program=null,a.indices=null,a.attributes=[],a.stride=0,a.uniforms={},a.vbo=null,a.drawMode=t.TRIANGLES,a.vao=null,a}return Object(d["a"])(i,[{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setProgram",value:function(t){return this.program=t,t.use(),u["o"].$extend.call(this.uniforms,t._uniforms),this}},{key:"setIndexValues",value:function(t){return this.indices||(this.indices=new E(this.gl)),this.indices.set(t),this}},{key:"setIndexBuffer",value:function(t){return this.indices=t,this}},{key:"declareAttributes",value:function(t){t=Array.prototype.concat.apply([],arguments);for(var e=0,i=0;i<t.length;i++){var r=t[i];"string"===typeof r&&(r=this.program.getAttribute(r)),this.attributes.push(r),r._offset=e,e+=4*r.size}return this.stride=e,this}},{key:"setAttributes",value:function(t){return console.warn("deprecated"),this.declareAttributes(t)}},{key:"setAttributeData",value:function(t,e){this.vbo||(this.vbo=new T(this.gl,e)),this.vbo.set(t),this.vbo.bind();var i=this.stride;return this.attributes.forEach((function(t){t.specify(i)})),T.unbind(this.gl),this}},{key:"setAttributeDataArray",value:function(t,e){this.vbo||(this.vbo=new T(this.gl,e)),this.vbo.setAsInterleavedArray(t),this.vbo.bind();var i=this.stride;return this.attributes.forEach((function(t){t.specify(i)})),T.unbind(this.gl),this}},{key:"setAttributeVbo",value:function(t){this.vbo=t,this.vbo.bind();var e=this.stride;return this.attributes.forEach((function(t){t.specify(e)})),T.unbind(this.gl),this}},{key:"createVao",value:function(){var t=this.gl,e=this.stride;return this.extVao||(this.extVao=k.getVertexArrayObject(t)),this.vao||(this.vao=this.extVao.createVertexArrayOES()),this.extVao.bindVertexArrayOES(this.vao),this.indices&&this.indices.bind(),this.vbo&&this.vbo.bind(),this.attributes.forEach((function(i){i.specify(e),t.enableVertexAttribArray(i._location)})),this.extVao.bindVertexArrayOES(null),E.unbind(t),T.unbind(t),this}},{key:"declareUniforms",value:function(t){t=Array.prototype.concat.apply([],arguments);var e=this.program,i=Array.prototype.reduce.call(t,(function(t,i){return t[i]=e.getUniform(i),t}),{});return u["o"].$extend.call(this.uniforms,i),this}},{key:"setUniforms",value:function(t){return console.warn("deprecated"),this.declareUniforms(t)}},{key:"draw",value:function(){var t=this.gl,e=this.extVao;if(this.program.use(),this.vao)e.bindVertexArrayOES(this.vao);else{this.indices&&this.indices.bind(),this.vbo&&this.vbo.bind();var i=this.stride;this.attributes.forEach((function(t){t.enable(),t.specify(i)}))}u["o"].forIn.call(this.uniforms,(function(t,e){e.assign()})),this.flare("predraw"),this.gl.drawElements(this.drawMode,this.indices.length,t.UNSIGNED_SHORT,0),this.flare("postdraw"),this.vao?e.bindVertexArrayOES(null):(E.unbind(t),T.unbind(t)),this.attributes.forEach((function(t){t.disable()})),u["o"].forIn.call(this.uniforms,(function(t,e){e.reassign()}))}},{key:"delete",value:function(){var t=this.ext;this.program.delete(),this.vao?t.deleteVertexArrayOES(this.vao):(this.indices.delete(),this.vbo.delete())}}]),i}(u["h"]),j=function(){function t(e,i,r){Object(l["a"])(this,t),this.gl=e,this._texture=e.createTexture(),i&&this.setImage(i,r)}return Object(d["a"])(t,[{key:"setImage",value:function(t,e){var i=this.gl;return"string"===typeof t&&(t=u["c"].get("image",t)),e=e||function(t){t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D)},i.bindTexture(i.TEXTURE_2D,this._texture),e(i),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.domElement),i.bindTexture(i.TEXTURE_2D,null),this}},{key:"bind",value:function(t){var e=this.gl;return e.activeTexture(e["TEXTURE"+(t||0)]),e.bindTexture(e.TEXTURE_2D,this._texture),this}},{key:"delete",value:function(){this.gl.deleteTexture(this._texture)}}],[{key:"unbind",value:function(t){return t.bindTexture(t.TEXTURE_2D,null),this}}]),t}(),S=i("45eb"),M=i("7e84"),R=(i("ac1f"),i("1276"),i("d81d"),i("2ca0"),i("498a"),i("5319"),function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.call(this),t.gl=null,t.type=null,t.compiled=!1,t.assetType=null,t._shader=null,t}return Object(d["a"])(i,[{key:"loadDummy",value:function(){Object(S["a"])(Object(M["a"])(i.prototype),"loadDummy",this).call(this)}},{key:"setSource",value:function(t){return this.data=t,this}},{key:"compile",value:function(t){if(this._resolveInclude(),this.gl=t,this.type=this._type(t),this._shader=t.createShader(this.type),t.shaderSource(this._shader,this.data),t.compileShader(this._shader),t.getShaderParameter(this._shader,t.COMPILE_STATUS))return this.compiled=!0,this;throw this.compiled=!1,t.getShaderInfoLog(this._shader)}},{key:"_resolveInclude",value:function(){var t=this,e=this.data.split(/(\n|\r\n)/),i=e.map((function(e){if(e.startsWith("// <include>")){var i=e.replace("// <include>","").trim(),r=u["c"].get(t.assetType,i);if(null==r)throw"そんなシェーダーないです (".concat(i,")");return r.data}return e}));this.data=i.join("\n")}},{key:"_type",value:function(){return 0}},{key:"delete",value:function(){this.gl.deleteShader(this._shader)}}]),i}(u["i"])),F=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.call(this),t.assetType="vertexShader",t}return Object(d["a"])(i,[{key:"_type",value:function(t){return t.VERTEX_SHADER}}]),i}(R),L=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.call(this),t.assetType="fragmentShader",t}return Object(d["a"])(i,[{key:"_type",value:function(t){return t.FRAGMENT_SHADER}}]),i}(R),N=function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,null,[{key:"register",value:function(){u["b"].register("vertexShader",(function(t,e){var i=new F;return i.load({path:e})})),u["b"].register("fragmentShader",(function(t,e){var i=new L;return i.load({path:e})}))}}]),t}(),U=function(){function t(e,i,r,a){if(Object(l["a"])(this,t),this.gl=e,this.name=r,this._location=null,this._type=null,this._ptype=null,this._offset=0,this._location=e.getAttribLocation(i,r),-1===this._location)throw"attribute "+r+" not found";switch(this._type=a,a){case e.BOOL:this.size=1,this._ptype=e.BOOL;break;case e.FLOAT:this.size=1,this._ptype=e.FLOAT;break;case e.FLOAT_VEC2:this.size=2,this._ptype=e.FLOAT;break;case e.FLOAT_VEC3:this.size=3,this._ptype=e.FLOAT;break;case e.FLOAT_VEC4:this.size=4,this._ptype=e.FLOAT;break}}return Object(d["a"])(t,[{key:"specify",value:function(t){return this.gl.vertexAttribPointer(this._location,this.size,this._ptype,!1,t,this._offset),this}},{key:"enable",value:function(){return this.gl.enableVertexAttribArray(this._location),this}},{key:"disable",value:function(){return this.gl.disableVertexAttribArray(this._location),this}}]),t}(),B=function(){function t(e,i,r,a){switch(Object(l["a"])(this,t),this.gl=e,this.name=r,this._location=e.getUniformLocation(i,r),this._type=a,this.texture=null,this._location=null,this._value=null,this._uniformMethod=null,a){case e.BOOL:this._uniformMethod="uniform1i";break;case e.FLOAT:this._uniformMethod="uniform1f";break;case e.FLOAT_VEC2:this._uniformMethod="uniform2fv";break;case e.FLOAT_VEC3:this._uniformMethod="uniform3fv";break;case e.FLOAT_VEC4:this._uniformMethod="uniform4fv";break;case e.FLOAT_MAT2:this._uniformMethod="uniformMatrix2fv";break;case e.FLOAT_MAT3:this._uniformMethod="uniformMatrix3fv";break;case e.FLOAT_MAT4:this._uniformMethod="uniformMatrix4fv";break;case e.SAMPLER_2D:this._uniformMethod="uniform1i";break}}return Object(d["a"])(t,[{key:"setValue",value:function(t){return this._value=t,this}},{key:"setTexture",value:function(t){return"string"===typeof t&&(t=new j(this.gl,t)),this.texture=t,this}},{key:"assign",value:function(){var t=this.gl;switch(this._type){case t.BOOL:case t.FLOAT:case t.FLOAT_VEC2:case t.FLOAT_VEC3:case t.FLOAT_VEC4:t[this._uniformMethod](this._location,this._value);break;case t.FLOAT_MAT2:case t.FLOAT_MAT3:case t.FLOAT_MAT4:t[this._uniformMethod](this._location,!1,this._value);break;case t.SAMPLER_2D:this.texture&&this.texture.bind(this._value),t[this._uniformMethod](this._location,this._value);break}return this}},{key:"reassign",value:function(){var t=this.gl;switch(this._type){case t.SAMPLER_2D:this.texture&&j.unbind(t);break}return this}},{key:"value",get:function(){return this._value},set:function(t){this.setValue(t)}}]),t}(),C=0,I=function(){function t(e){Object(l["a"])(this,t),this.gl=e,this._program=e.createProgram(),this._program._id=C++,this.linked=!1,this._attributes={},this._uniforms={},this._shaders=[],this._vbo=null}return Object(d["a"])(t,[{key:"attach",value:function(t){var e=this.gl;return"string"===typeof t&&(t=u["c"].get("vertexShader",t)||u["c"].get("fragmentShader",t)),t.compiled||t.compile(e),e.attachShader(this._program,t._shader),this._shaders.push(t),this}},{key:"link",value:function(){var t=this.gl;if(t.linkProgram(this._program),t.validateProgram(this._program),t.getProgramParameter(this._program,t.LINK_STATUS)){for(var e=t.getProgramParameter(this._program,t.ACTIVE_ATTRIBUTES),i=0;i<e;i++){var r=t.getActiveAttrib(this._program,i);this.getAttribute(r.name,r.type)}for(var a=t.getProgramParameter(this._program,t.ACTIVE_UNIFORMS),n=0;n<a;n++){var s=t.getActiveUniform(this._program,n);if(s.size>1)for(var o=0;o<s.size;o++){var u=s.name.replace("[0]","["+o+"]");this.getUniform(u,s.type)}else this.getUniform(s.name,s.type)}return this.linked=!0,this}throw this.linked=!1,t.getProgramInfoLog(this._program)}},{key:"getAttribute",value:function(t,e){return this._attributes[t]||(this._attributes[t]=new U(this.gl,this._program,t,e)),this._attributes[t]}},{key:"getUniform",value:function(t,e){return this._uniforms[t]||(this._uniforms[t]=new B(this.gl,this._program,t,e)),this._uniforms[t]}},{key:"use",value:function(){return t.currentUsing===this||(this.gl.useProgram(this._program),t.currentUsing=this),this}},{key:"delete",value:function(){var t=this.gl,e=this._program;return this._shaders.forEach((function(i){t.detachShader(e,i._shader)})),this._shaders.forEach((function(e){t.deleteShader(e._shader)})),t.deleteProgram(e),this}}]),t}();Object(g["a"])(I,"currentUsing",null);var P=function(t){return Math.pow(2,Math.round(Math.max(t,0)).toString(2).length)};Math.log2=Math.log2||function(t){return Math.log(t)/Math.LN2};var V=function(t){this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)},D=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t,r,a){var n;Object(l["a"])(this,i),n=e.call(this,t),n.fullUnitSize=0,n._index=0,n.drawType=t.STREAM_DRAW,n.size=a||2e3,n.sprites=[],n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={texture:null,size:0,start:0};r=r||i.createProgram(t),n.setProgram(r).declareUniforms("vpMatrix","texture");for(var o=[],u=0,h=0;u<n.size;u++,h+=4)o=o.concat([h,h+1,h+2,h+1,h+2,h+3]);n.setIndexValues(o);var c=[{name:"position",type:t.FLOAT,attributeSize:2,unitSize:2},{name:"uv",attributeSize:2,type:t.FLOAT,unitSize:2},{name:"color",type:t.FLOAT,attributeSize:4,unitSize:4}];c.forEach((function(t){n.fullUnitSize+=t.unitSize,n.declareAttributes(t.name)}));var f=new T(n.gl).set(0);n.setAttributeVbo(f),n.buffers=[];for(var d=1;d<=P(n.size);d*=2){var g=4*d*n.stride;n.buffers.push(new V(g))}return n.indices&&n.indices.bind(),n}return Object(d["a"])(i,[{key:"assignSprite",value:function(t,e){var i=t.srcRect,r=t._image.domElement.width,a=t._image.domElement.height,n=t.origin,s=t._worldMatrix,o=t._worldAlpha,u={x:i.x/r,y:i.y/a,dx:(i.x+i.width)/r,dy:(i.y+i.height)/a},l=this.fullUnitSize,h=e*l*4,c=0,f=this.buffer.float32View,d=-n.x*t._width,g=(1-n.y)*t._height;return f[h+c]=d*s.m00+g*s.m01+s.m02,f[h+c+1]=d*s.m10+g*s.m11+s.m12,f[h+c+2]=u.x,f[h+c+3]=u.dy,f[h+c+4]=1,f[h+c+5]=1,f[h+c+6]=1,f[h+c+7]=o,c+=l,d=(1-n.x)*t._width,g=(1-n.y)*t._height,f[h+c]=d*s.m00+g*s.m01+s.m02,f[h+c+1]=d*s.m10+g*s.m11+s.m12,f[h+c+2]=u.dx,f[h+c+3]=u.dy,f[h+c+4]=1,f[h+c+5]=1,f[h+c+6]=1,f[h+c+7]=o,c+=l,d=-n.x*t._width,g=-n.y*t._height,f[h+c]=d*s.m00+g*s.m01+s.m02,f[h+c+1]=d*s.m10+g*s.m11+s.m12,f[h+c+2]=u.x,f[h+c+3]=u.y,f[h+c+4]=1,f[h+c+5]=1,f[h+c+6]=1,f[h+c+7]=o,c+=l,d=(1-n.x)*t._width,g=-n.y*t._height,f[h+c]=d*s.m00+g*s.m01+s.m02,f[h+c+1]=d*s.m10+g*s.m11+s.m12,f[h+c+2]=u.dx,f[h+c+3]=u.y,f[h+c+4]=1,f[h+c+5]=1,f[h+c+6]=1,f[h+c+7]=o,this}},{key:"render",value:function(t){if(t.visible&&(t._calcWorldAlpha&&t._calcWorldAlpha(),!(t._worldAlpha&&t._worldAlpha<=0)))return this._index>=this.size&&this.flush(),t._calcWorldMatrix&&t._calcWorldMatrix(),t.image&&(t.image._glTexture||(t.gl=this.gl,t.image._glTexture=new j(this.gl,t.image)),this.sprites[this._index++]=t),t.children.length>0&&t.children.forEach(function(t){this.render(t)}.bind(this)),this}},{key:"flush",value:function(){if(0!==this._index){var t,e=this.gl,i=this.groups,r=i[0],a=null,n=null,s=1,o=P(this._index),l=Math.log2(o);for(this.buffer=this.buffers[l],r.start=0,r.texture=null,t=0;t<this._index;t++){var h=this.sprites[t];n=h.image,a!==n&&(a=n,null!=r.texture&&(r.size=t-r.start,r=i[s++],r.start=t),r.texture=h.image._glTexture),this.assignSprite(h,t)}for(r.size=t-r.start,e.bindBuffer(e.ARRAY_BUFFER,this.vbo._vbo),this.vbo.array.byteLength>=this.buffer.vertices.byteLength?e.bufferSubData(e.ARRAY_BUFFER,0,this.buffer.vertices):e.bufferData(e.ARRAY_BUFFER,this.buffer.vertices,this.drawType),this.vbo.array=this.buffer.vertices,e.bindBuffer(e.ARRAY_BUFFER,null),t=0;t<s;++t){var c=i[t];this.uniforms.texture.setTexture(c.texture),u["o"].forIn.call(this.uniforms,(function(t,e){e.assign()})),this.flare("predraw"),e.drawElements(this.drawMode,6*c.size,e.UNSIGNED_SHORT,6*c.start*2),this.flare("postdraw")}return this._index=0,this}}}],[{key:"createProgram",value:function(t){var e=new F;e.data=i.vertexShaderSource;var r=new L;return r.data=i.fragmentShaderSource,new I(t).attach(e).attach(r).link()}}]),i}(w);Object(g["a"])(D,"vertexShaderSource",["precision highp float;","attribute vec2 position;","attribute vec2 uv;","attribute vec4 color;","uniform mat4 vpMatrix;","varying vec2 vUv;","varying vec4 vColor;","void main(void) {","  gl_Position = vpMatrix * vec4(position, 0.0, 1.0);","  vUv = uv;","  vColor = vec4(color.rgb * color.a, color.a);","}"].join("\n")),Object(g["a"])(D,"fragmentShaderSource",["precision mediump float;","uniform sampler2D texture;","varying vec2 vUv;","varying vec4 vColor;","void main(void) {","  gl_FragColor = texture2D(texture, vUv) * vColor;","}"].join("\n"));var z=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){var r;Object(l["a"])(this,i),r=e.call(this,t),r.gl=y.getContext();var a=r.gl;if(!a)return console.error("お使いのブラウザはWebGLに対応していません"),Object(b["a"])(r);r.renderChildBySelf=!0,r.resolution=1,r.renderer=null,r.domElement=y.getView();var n=r.domElement.width=r.width*r.resolution|0,s=r.domElement.height=r.height*r.resolution|0;return a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.SCISSOR_TEST),a.scissor(0,0,n,s),a.viewport(0,0,n,s),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.clearColor(0,0,0,0),r.camera=(new O).setPosition(.5*n,.5*s,1).lookAt(.5*n,.5*s,0).ortho(.5*-n,.5*n,.5*-s,.5*s,0,1).calcVpMatrix(),r.renderer=new D(a),r.renderer.uniforms.vpMatrix.value=r.camera.uniformValues().vpMatrix,r}return Object(d["a"])(i,[{key:"draw",value:function(t){var e=this.gl,i=this.domElement,r=this.renderer;if(!e)return u["l"].prototype.draw.apply(this,arguments);if(e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.children.length>0){for(var a=this.children.slice(),n=0,s=a.length;n<s;++n)r.render(a[n]);r.flush()}t.context.drawImage(i,0,0,i.width,i.height,0,0,this.width,this.height)}}]),i}(u["l"]),X=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){var r;return Object(l["a"])(this,i),r=e.call(this,u["o"].$safe.call(t||{},{width:p.width,height:p.height,backgroundColor:"black"})),r.setup(),r}return Object(d["a"])(i,[{key:"setup",value:function(){this.base=(new u["f"]).setPosition(-50,-250).addChildTo(this),this.glLayer=new z({width:p.width,height:p.height}).addChildTo(this),this.data=u["c"].get("tmx","map1");var t=this.data.getImage();new u["p"](t).setOrigin(0,0).addChildTo(this),new u["p"]("actor4").addChildTo(this.glLayer)}},{key:"update",value:function(){}}]),i}(m),Y=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(l["a"])(this,i),e.call(this,{startLabel:"loading",scenes:[{label:"loading",className:u["m"],nextLabel:"title",arguments:{assets:f.common}},{label:"title",className:v,nextLabel:"main",arguments:{title:"SLASH BATTLE",width:p.width,height:p.height}},{label:"main",className:X,nextLabel:"title"}]})}return i}(u["n"]),G=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){var r;return Object(l["a"])(this,i),r=e.call(this,t),t.parent&&(r.parentDomElement=document.getElementById(t.parent),console.log("parentElement",r.parentDomElement),r.fitScreen()),r}return Object(d["a"])(i,[{key:"fitScreen",value:function(t){t=void 0===t||t;var e=function(){var t=this.domElement,e=t.style;e.position="absolute",e.margin="auto",e.left="0px",e.top="0px",e.bottom="0px",e.right="0px";var i=this.parentDomElement||window,r=t.width/(i.innerWidth||i.clientWidth),a=t.height/(i.innerHeight||i.clientHeight),n=t.height/t.width,s=i.clientWidth,o=i.clientHeight;r>a?(e.width=Math.floor(s)+"px",e.height=Math.floor(s*n)+"px"):(e.width=Math.floor(o/n)+"px",e.height=Math.floor(o)+"px")}.bind(this);e(),t&&parent.addEventListener("resize",e,!1)}}]),i}(u["e"]),J={data:function(){return{}},beforeCreate:function(){u["r"].main((function(){var t={width:960,height:640,fps:60,query:"#phina-canvas",parent:"phina-canvas-root",fit:!1},e=new G(t);e.replaceScene(new Y),e.run()}))},mounted:function(){}},$=J,W=(i("82fa"),i("2877")),H=Object(W["a"])($,s,o,!1,null,"75104550",null),q=H.exports,K={components:{PhinaCanvas:q}},Q=K,Z=(i("5c0b"),Object(W["a"])(Q,a,n,!1,null,null,null)),tt=Z.exports,et=i("2f62");r["a"].use(et["a"]);var it={},rt=new et["a"].Store({state:it,mutations:{},actions:{},modules:{}}),at=i("1da1"),nt=(i("96cf"),i("4e82"),function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(l["a"])(this,i),e.call(this)}return Object(d["a"])(i,[{key:"_load",value:function(t){var e=this,i=this.src.lastIndexOf("/");this.path=i>0?this.src.substring(0,i+1):"",this._resolve=t;var r=new XMLHttpRequest;r.open("GET",this.src),r.onreadystatechange=function(){if(4===r.readyState&&-1!==[200,201,0].indexOf(r.status)){var t=(new DOMParser).parseFromString(r.responseText,"text/xml");e.dataType="xml",e.data=t,e._parse(t).then((function(){return e._resolve(e)}))}},r.send(null)}},{key:"_propertiesToJSON",value:function(t){var e=t.getElementsByTagName("properties")[0],i={};if(void 0===e)return i;for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if("property"===a.tagName){var n=a.getAttribute("type"),s=a.getAttribute("value")||a.textContent;i[a.getAttribute("name")]="int"===n?parseInt(s,10):"float"===n?parseFloat(s):"bool"===n?"true"===s:s}}return i}},{key:"_attrToJSON",value:function(t){for(var e={},i=0;i<t.attributes.length;i++){var r=t.attributes[i].value;r=isNaN(parseFloat(r))?r:parseFloat(r),e[t.attributes[i].name]=r}return e}},{key:"_attrToJSON_str",value:function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;return e}},{key:"_parseCSV",value:function(t){var e=t.split(","),i=[];return e.forEach((function(t){var e=parseInt(t,10);i.push(e)})),i}},{key:"_parseBase64",value:function(t){for(var e=atob(t.trim()).split("").map((function(t){return t.charCodeAt(0)})),i=[],r=0,a=e.length/4;r<a;++r){var n=e[4*r];i[r]=parseInt(n,10)}return i}},{key:"loadDummy",value:function(){}}]),i}(u["a"])),st=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.call(this),t.image=null,t.tilesets=null,t.layers=null,t.path="",t._resolve=null,t}return Object(d["a"])(i,[{key:"getImage",value:function(t){return void 0===t?this.image:this._generateImage(t)}},{key:"getMapData",value:function(t){for(var e=0;e<this.layers.length;e++)if(this.layers[e].name===t)return this.layers[e].data.concat();return null}},{key:"getObjectGroup",value:function(t){t=t||null;for(var e=[],i=this.layers.length,r=0;r<i;r++)if("objectgroup"===this.layers[r].type&&(null==t||t===this.layers[r].name)){var a=this._cloneObjectLayer(this.layers[r]);if(null!==t)return a;e.push(a)}return e}},{key:"_cloneObjectLayer",value:function(t){var e=u["o"].$safe.call({},t);return e.objects=[],t.objects.forEach((function(t){var i={properties:u["o"].$extend.call(t,u["o"].$safe.call({},t.properties))};t.ellipse&&(i.ellipse=t.ellipse),t.gid&&(i.gid=t.gid),t.polygon&&(i.polygon=t.polygon.clone()),t.polyline&&(i.polyline=t.polyline.clone()),e.objects.push(i)})),e}},{key:"_parse",value:function(t){var e=this;return new Promise((function(i){var r=t.getElementsByTagName("map")[0],a=e._attrToJSON(r);u["o"].$extend.call(e,a),e.properties=e._propertiesToJSON(r),e.tilesets=e._parseTilesets(t),e.tilesets.sort((function(t,e){return t.firstgid-e.firstgid})),e.layers=e._parseLayers(t),e._checkImage().then((function(){e.image=e._generateImage(),i()}))}))}},{key:"_parseTilesets",value:function(t){var e=this,i=Array.prototype.forEach,r=[],a=t.getElementsByTagName("tileset");return i.call(a,function(){var t=Object(at["a"])(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={},n=e._attrToJSON(i),n.source?(a.isOldFormat=!1,a.source=e.path+n.source):(a.isOldFormat=!0,a.data=i),a.firstgid=n.firstgid,r.push(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r}},{key:"_parseLayers",value:function(t){var e=this,i=Array.prototype.forEach,r=[],a=t.getElementsByTagName("map")[0],n=[];return i.call(a.childNodes,(function(t){"layer"!==t.tagName&&"objectgroup"!==t.tagName&&"imagelayer"!==t.tagName||n.push(t)})),n.forEach((function(t){switch(t.tagName){case"layer":var a=t.getElementsByTagName("data")[0],n=a.getAttribute("encoding"),s={type:"layer",name:t.getAttribute("name")};"csv"===n?s.data=e._parseCSV(a.textContent):"base64"===n&&(s.data=e._parseBase64(a.textContent));var o=e._attrToJSON(t);u["o"].$extend.call(s,o),s.properties=e._propertiesToJSON(t),r.push(s);break;case"objectgroup":var l={type:"objectgroup",objects:[],name:t.getAttribute("name"),x:parseFloat(t.getAttribute("offsetx"))||0,y:parseFloat(t.getAttribute("offsety"))||0,alpha:t.getAttribute("opacity")||1,color:t.getAttribute("color")||null,draworder:t.getAttribute("draworder")||null};i.call(t.childNodes,(function(t){if(3!==t.nodeType){var i=e._attrToJSON(t);i.properties=e._propertiesToJSON(t),t.childNodes.length&&t.childNodes.forEach((function(t){if(3!==t.nodeType){if("ellipse"===t.nodeName&&(i.ellipse=!0),"polygon"===t.nodeName){i.polygon=[];var r=e._attrToJSON_str(t),a=r.points.split(" ");a.forEach((function(t){var e=t.split(",");i.polygon.push({x:parseFloat(e[0]),y:parseFloat(e[1])})}))}if("polyline"===t.nodeName){i.polyline=[];var n=e._attrToJSON_str(t),s=n.points.split(" ");s.forEach((function(t){var e=t.split(",");i.polyline.push({x:parseFloat(e[0]),y:parseFloat(e[1])})}))}}})),l.objects.push(i)}})),l.properties=e._propertiesToJSON(t),r.push(l);break;case"imagelayer":var h={type:"imagelayer",name:t.getAttribute("name"),x:parseFloat(t.getAttribute("offsetx"))||0,y:parseFloat(t.getAttribute("offsety"))||0,alpha:t.getAttribute("opacity")||1,visible:void 0===t.getAttribute("visible")||0!==t.getAttribute("visible")},c=t.getElementsByTagName("image")[0];h.image={source:c.getAttribute("source")},r.push(h);break;case"group":break}})),r}},{key:"_checkImage",value:function(){var t=this,e=[],i=[];if(this.tilesets.forEach((function(t){var i={isTileset:!0,image:t.source};e.push(i)})),this.layers.forEach((function(t){if(t.image){var i={isTileset:!1,image:t.image.source};e.push(i)}})),e.forEach((function(t){if(t.isTileset){var e=u["c"].get("tsx",t.image);e||i.push(t)}else{var r=u["c"].get("image",t.image);r||i.push(t)}})),i.length){var r={image:[],tsx:[]};return i.forEach((function(e){e.isTileset?r.tsx[e.image]=e.image:r.image[e.image]=t.path+e.image})),new Promise((function(e){var i=new u["b"];i.load(r),i.on("load",(function(){t.tilesets.forEach((function(t){t.tsx=u["c"].get("tsx",t.source)})),e()}))}))}return Promise.resolve()}},{key:"_generateImage",value:function(t){for(var e=this,i=0,r=0;r<this.layers.length;r++)"layer"!==this.layers[r].type&&"imagelayer"!==this.layers[r].type||i++;if(0===i)return null;for(var a=this.width*this.tilewidth,n=this.height*this.tileheight,s=(new u["d"]).setSize(a,n),o=0;o<this.layers.length;o++){if("layer"===this.layers[o].type&&"0"!==this.layers[o].visible&&(void 0===t||t===this.layers[o].name))for(var l=this.layers[o],h=l.data,c=l.width,f=l.height,d=l.opacity||1,g=0,v=0;v<f;v++)for(var p=0;p<c;p++){var m=h[g];0!==m&&this._setMapChip(s,m,p*this.tilewidth,v*this.tileheight,d),g++}if("objectgroup"===this.layers[o].type&&"0"!==this.layers[o].visible&&(void 0!==t&&t!==this.layers[o].name||function(){var t=e.layers[o],i=t.opacity||1;t.objects.forEach(function(t){t.gid&&this._setMapChip(s,t.gid,t.x,t.y,i)}.bind(e))}()),"imagelayer"===this.layers[o].type&&"0"!==this.layers[o].visible&&(void 0===t||t===this.layers[o].name)){var b=u["c"].get("image",this.layers[o].image.source);s.context.drawImage(b.domElement,this.layers[o].x,this.layers[o].y)}}var y=new u["q"];return y.domElement=s.domElement,y}},{key:"_setMapChip",value:function(t,e,i,r){for(var a,n=0;n<this.tilesets.length;n++){var s=this.tilesets[n],o=this.tilesets[n+1];o?s.firstgid<=e&&e<o.firstgid&&(a=s,n=this.tilesets.length):(a=s,n=this.tilesets.length)}var l=a.tsx,h=l.chips[e-a.firstgid],c=u["c"].get("image",h.image);t.context.drawImage(c.domElement,h.x+l.margin,h.y+l.margin,l.tilewidth,l.tileheight,i,r,l.tilewidth,l.tileheight)}}],[{key:"register",value:function(){u["b"].register("tmx",(function(t,e){var r=new i;return r.load(e)}))}}]),i}(nt),ot=(i("4de4"),function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(t){var r;return Object(l["a"])(this,i),r=e.call(this),r.image=null,r.tilewidth=0,r.tileheight=0,r.tilecount=0,r.columns=0,t&&r.loadFromXML(t).then((function(){})),r}return Object(d["a"])(i,[{key:"loadFromXML",value:function(t){return this._parse(t)}},{key:"_parse",value:function(t){var e=this;return new Promise((function(i){var r=t.getElementsByTagName("tileset")[0],a=e._attrToJSON(r);u["o"].$safe.call(a,{tilewidth:32,tileheight:32,spacing:0,margin:0}),u["o"].$extend.call(e,a),e.chips=[],e.imageName=r.getElementsByTagName("image")[0].getAttribute("source");var n=r.getElementsByTagName("image")[0].getAttribute("trans");n&&(e.transR=parseInt(n.substring(0,2),16),e.transG=parseInt(n.substring(2,4),16),e.transB=parseInt(n.substring(4,6),16));for(var s=0;s<e.tilecount;s++)e.chips[s]={image:e.imageName,x:s%e.columns*(e.tilewidth+e.spacing)+e.margin,y:Math.floor(s/e.columns)*(e.tileheight+e.spacing)+e.margin};e._loadImage().then((function(){return i()}))}))}},{key:"_loadImage",value:function(){var t=this;return new Promise((function(e){var i={imageName:t.imageName,imageUrl:t.path+t.imageName,transR:t.transR,transG:t.transG,transB:t.transB},r=null,a=u["c"].get("image",i.image);a?t.image=a:r=i;var n={image:[]};if(n.image[i.imageName]=i.imageUrl,r){var s=new u["b"];s.load(n),s.on("load",(function(){if(t.image=u["c"].get("image",i.imageUrl),void 0!==i.transR){var r=i.transR,a=i.transG,n=i.transB;t.image.filter((function(t,e,i,s,o){var u=o.data;t[0]===r&&t[1]===a&&t[2]===n&&(u[e+3]=0)}))}e()}))}else e()}))}}],[{key:"register",value:function(){u["b"].register("tsx",(function(t,e){var r=new i;return r.load(e)}))}}]),i}(nt));r["a"].config.productionTip=!1,u["g"].defaults.width=960,u["g"].defaults.height=640,st.register(),ot.register(),N.register(),window.vueApp=new r["a"]({store:rt,render:function(t){return t(tt)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"82fa":function(t,e,i){"use strict";i("9cd7")},"9c0c":function(t,e,i){},"9cd7":function(t,e,i){}});